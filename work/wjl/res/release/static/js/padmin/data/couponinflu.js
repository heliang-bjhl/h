seajs.use("calendar_css"),seajs.use(["$","util","calendar","select"],function(a,b,c,d){var e={},f={setSel:function(){e.mounth1=new d({trigger:"#j_Mounth1"}).render(),e.mounth2=new d({trigger:"#j_Mounth2"}).render()},setChart1:function(a){{var b={chart:{renderTo:"contain2",type:"column",animation:{duration:1e3}},subtitle:{text:"",align:"right",x:-10},legend:{enabled:!1},title:{text:"优惠券对到访频次影响分析"},xAxis:{categories:a.monthArr},yAxis:{title:{text:"次"}},series:[a.obj1,a.obj2],credits:{enabled:0}};new Highcharts.Chart(b)}},setChart2:function(b){a("#contain1").highcharts({title:{text:"优惠券对到访停留时间的影响分析"},subtitle:{text:""},xAxis:{categories:b.dayArr},yAxis:{title:{text:"分钟"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"分钟"},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"有优惠券",data:b.arr1},{name:"没有优惠券",data:b.arr2}]})},sendAjax:function(){a.ajax({url:"/rpt_mall_visit_staytime_d_tick",data:{},dataType:"json"}).done(function(a){if(a&&200==a.code){for(var b=a.data,c=[],d=[],e=[],g=0;g<b.length;g++)e.push(b[g].eve_day),c.push(parseInt(b[g].t_stay_time)||0),d.push(parseInt(b[g].stay_time)||0);f.setChart2({dayArr:e,arr1:c,arr2:d})}}).fail(function(){})},sendAjax2:function(b,c){a.ajax({url:"/rpt_mall_visit_freq_p_tick",data:{month1:b,month2:c},dataType:"json"}).done(function(a){if(a&&200==a.code){var b=a.data1,c=a.data2,d=[b[0].eve_day,c[0].eve_day],e={name:"领取优惠券会员",data:[parseInt(b[0].t_freq)||0,parseInt(c[0].t_freq)||0],stack:"领取优惠券会员"},g={name:"未领取优惠券会员",data:[parseInt(b[0].nt_freq)||0,parseInt(c[0].nt_freq)||0],stack:"未领取优惠券会员"};f.setChart1({monthArr:d,obj1:e,obj2:g})}}).fail(function(){})},bind:function(){a("#j_contrast").on("click",function(){f.sendAjax2(a("#j_Mounth1").val(),a("#j_Mounth2").val())})}},g=function(){f.setSel(),f.sendAjax(),f.bind(),a("#j_contrast").trigger("click")};g(),$$m.finish("ok")});