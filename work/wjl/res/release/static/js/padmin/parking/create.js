$$m.length=2,seajs.use("calendar_css"),seajs.use(["$","textLimit","select","util","calendar"],function(a,b,c,d,e){var f={},g={setSlt:function(){f.useStartTime_m=new c({trigger:"#startTime-h"}).render(),f.useStartTime_s=new c({trigger:"#startTime-m"}).render(),f.useEndTime_m=new c({trigger:"#endTime-h"}).render(),f.useEndTime_s=new c({trigger:"#endTime-m"}).render()},setCal:function(){var a=new e({trigger:"#txtBeginDate"}),b=new e({trigger:"#txtEndDate"});a.on("selectDate",function(a){b.range([a,null])}),b.on("selectDate",function(b){a.range([null,b])})},setChangeRadio:function(){new d.ChangeRadio({radioName:"tickType"})}},h=function(){g.setSlt(),g.setCal(),g.setChangeRadio()};h(),$$m.itemok("ok")}),seajs.use(["validator","$","util"],function(a,b,c){b(function(){function d(){var a=c.timeToString({hour:"#startTime-h",minute:"#startTime-m"}),d=c.timeToString({hour:"#endTime-h",minute:"#endTime-m"}),f=[],g=b('input[name="tickType"]:checked').val();1==g?f=b("#j_consumeTime1_level_k").find("input").val():(b("#j_consumeTime2_level_k p").each(function(){var a=b(this).find("input:eq(0)").val()+"-"+b(this).find("input:eq(1)").val();f.push(a)}),f=f.join(","));var h={parkingTime:f,useStartTime:a,useEndTime:d};c.formSend("#"+e,{extraData:h,ajaxSuccess:function(a){c.go(a)},submitButton:"#btnSave"})}var e="frmParkingCreate",f=new a({element:"#"+e,onFormValidated:function(a){1!=a&&d()},autoSubmit:!1,failSilently:!0});b("#j_consumeTime1_level_k").find("input").attr("data-explain","请输入 全场统一消费时长"),f.addItem({element:'input[name="title"]',required:!0,errormessageRequired:"请输入主题名称。"}).addItem({element:"#txtBeginDate",required:!0,errormessageRequired:"请输入 券有效期的开始时间。"}).addItem({element:"#txtEndDate",required:!0,errormessageRequired:"请输入 券有效期的截止时间。"}).addItem({element:'[name="tickType"]',required:!0,errormessageRequired:"请选择消费时长类型。"}).addItem({element:b("#j_consumeTime1_level_k").find("input"),required:!0,rule:"",errormessageRequired:"请输入 全场统一消费时长"}),b("[name=tickType]").change(function(){var a=b(this).attr("value");"1"==a?(f.removeItem(b("#j_consumeTime1_level_k").find("input")),b("#j_consumeTime1_level_k").find("input").attr("data-explain","请输入 全场统一消费时长"),f.addItem({element:b("#j_consumeTime1_level_k").find("input"),required:!0,rule:"",errormessageRequired:"请输入 全场统一消费时长"})):(f.removeItem('[name="userNoValue"]'),b("#j_consumeTime2_level_k p").eq(0).find("input").attr("data-explain","请输入 全场统一消费时长"),f.addItem({element:b("#j_consumeTime2_level_k p").eq(0).find("input").eq(0),required:!0,rule:"",errormessageRequired:"请输入正确的内容"}),f.addItem({element:b("#j_consumeTime2_level_k p").eq(0).find("input").eq(1),required:!0,rule:"",errormessageRequired:"请输入正确的内容"}))}),b("[name=tickType]").trigger("change")}),$$m.itemok("ok")});