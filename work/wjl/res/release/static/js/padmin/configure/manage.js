seajs.use(["$","select","validator","confirmbox","util"],function(a,b,c,d,e){a(function(){var b=function(){var a=['<div class="dialog-form">','<form action="" id="j_form">',"<fieldset>",'<div id="j_addid"></div>','<div class="ui-form-item">','<label for="" class="ui-label">','<span class="ui-form-required">*</span>',"名称","</label>",'<input class="ui-input" type="text"  name="dicName" id="j_dicName" placeholder="名称" value="">',"</div>",'<div class="ui-form-item">','<label for="" class="ui-label">','<span class="ui-form-required">*</span>',"代码","</label>",'<input class="ui-input" type="text"  name="dicCode" id="j_dicCode" placeholder="代码" value="">',"</div>","</fieldset>","</form> ","</div>"].join("");return a},c={dialog:function(){e.confirm.open({title:"填写类型名称",message:b(),confirmTpl:'<span class="ui-dialog-button-orange J_btnPass" id="J_btnPass">修改</span>',cancelTpl:'<span class="ui-dialog-button-white J_btnRefuse">取消</span>',onCancel:function(){e.confirm.close()},onConfirm:function(){c.send()}})},dialog2:function(){e.confirm.open({title:"是否删除",message:'<form action="" id="j_form2"><input id="j_form2_v" type="hidden" name="id"/></form>',confirmTpl:'<span class="ui-dialog-button-orange J_btnPass" id="J_btnPass2">删除</span>',cancelTpl:'<span class="ui-dialog-button-white J_btnRefuse">取消</span>',onCancel:function(){e.confirm.close()},onConfirm:function(){c.send2()}})},url:"",url2:"",set:function(b){a("#j_dicName").val(b.name),a("#j_dicCode").val(b.code),b.id?(a("#j_addid").html('<input  type="hidden" name="id" value="'+b.id+'"/>'),a("#J_btnPass").html("修改")):(a("#j_addid").html(),a("#J_btnPass").html("添加"))},showDialog:function(a){b(a);c.dialog(),c.set(a)},send:function(){e.formSend("#j_form",{url:c.url,ajaxSuccess:function(a){e.go(a)},error:function(){},submitButton:"#J_btnPass"})},send2:function(){e.formSend("#j_form2",{url:c.url2,ajaxSuccess:function(a){e.go(a)},error:function(){},submitButton:"#J_btnPass2"})},bind:function(){a("#tblList").on("click",".j-delete-tr",function(){c.url2=a(this).data("type")+"_"+a("#j_type").val()+".aj",c.dialog2(),a("#j_form2_v").val(a(this).data("id"))}),a("#tblList").on("click",".j-change-mes",function(){c.showDialog({name:a(this).closest("tr").find("td:eq(0)").text(),code:a(this).closest("tr").find("td:eq(1)").text(),id:a(this).data("id")}),c.url=a(this).data("type")+"_"+a("#j_type").val()+".aj"}),a("#j_add").on("click",function(){c.url=a(this).data("type")+"_"+a("#j_type").val()+".aj",c.showDialog({name:"",code:""})})}};c.bind()}),$$m.finish("ok")});