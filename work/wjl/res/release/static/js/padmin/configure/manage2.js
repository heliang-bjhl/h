seajs.use(["$","select","textLimit","confirmbox","insertText","util"],function(a,b,c,d,e){a(function(){function c(){new b({trigger:insertBtn1}).render().on("change",function(b){if("插入变量"!=b.text()){var c=b.attr("data-value");e(a("#jAddVariables1")[0],c)}}),new b({trigger:insertBtn2}).render().on("change",function(b){if("插入变量"!=b.text()){var c=b.attr("data-value");e(a("#jAddVariables2")[0],c)}})}function f(a){var b=a,c=(b.result,b.btn,b.dialog),d=c.element,e=d.find(".J_btnPass");e.on("click",function(){c.hide()})}var g=['<div class="dialog-form">','<form action="" id="frmDialog">','<div class="ui-form-item dialog-form-item">','<label for="msg" class="ui-label">',"主题:","</label>",'<input class="ui-input" type="text" id="jAddVariables1" name="spec" placeholder="">','<select name="" id="insertBtn1" class="">','<option value="0">插入变量</option>','<option value="会员昵称">会员昵称</option>','<option value="手机号">手机号</option>','<option value="会员ID">会员ID</option>',"</select>",'<div class="ui-form-explain"></div>',"</div>",'<div class="ui-form-item dialog-form-item">','<label for="msg" class="ui-label">',"渠道:","</label>",'<input type="radio" id="jInsideMall" /><label class="m-radio" for="jInsideMall">站内信</label>','<input type="radio" id="jSMS" /><label class="m-radio" for="jSMS">手机短信</label>','<div class="ui-form-explain"></div>',"</div>",'<div class="ui-form-item dialog-form-item">','<label for="msg" class="ui-label">',"内容:","</label>",'<textarea class="ui-textarea" name="" id="jAddVariables2"></textarea>','<select name="" id="insertBtn2" class="ui-select-trigger">','<option value="0">插入变量</option>','<option value="会员昵称">会员昵称</option>','<option value="手机号">手机号</option>','<option value="会员ID">会员ID</option>',"</select>","</div>","</form>","</div>"].join(""),h=new d({trigger:"#jAddNextTr",title:"标题",message:g,confirmTpl:'<span class="ui-dialog-button-orange J_btnPass">确定</span>',cancelTpl:'<span class="ui-dialog-button-white J_btnRefuse" style="display:none;">取消</span>',onConfirm:function(){f({result:1,btn:".J_btnPass",dialog:this})},onCancel:function(){f({result:2,btn:".J_btnRefuse",dialog:this})}});a("#jAddNextTr").click(function(){a(this).hasClass("testIfChange")||(c(),a(this).addClass("testIfChange"));{var b=h.element;b.find("#insertBtn1"),b.find("#insertBtn2")}a("body").find(".ui-select").css({"z-index":9999})})})});