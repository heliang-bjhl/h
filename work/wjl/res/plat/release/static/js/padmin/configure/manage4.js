seajs.use(["$","select","textLimit","confirmbox","util"],function(a,b,c,d){a(function(){function b(){var a=g.element;g.hide(),a.find("#msg").val("")}function c(b){{var c=b.clickbtn,d=b.dialog,e=d.element;c.closest("tr").find("td").eq(0)}a(e).on("click",".J_btnPass",function(){d.hide()})}a("#tblList").on("click",".j-delete-tr",function(){window.confirm("确认删除")&&a(this).closest("tr").remove()});var e={itemHtml:['<tr class="ui-table-split">',"<td>{htmls}</td>",'<td class="hand">','<input type="button" class="ui-button ui-button-mwhite j-change-mes" value="编辑">','<input type="button" class="ui-button ui-button-mwhite j-delete-tr" value="删除">',"</td>","</tr>"].join(""),bind:function(b){var c=b.triggerSelector,d=this;a(c).on("click",function(){var a=d._canInsert(b);return 1!=a?alert(a):void d.insert(b)})},_canInsert:function(b){var c=1,d=b.tBody,e=b.contextSelector,f=a(e).val();return f?(a(d).find("tr").length>0&&a(d).find("tr").each(function(){var b=a(this).find("td").eq(0).text();b==f&&(c="类型不能重复！")}),c):c="内容不能为空！"},send:function(){return!0},insert:function(b){var c=a(b.contextSelector).val(),d=b.tBody,e=this.itemHtml.replace(/{(\w*)}/g,function(){return c});a(d).append(e)}};e.bind({triggerSelector:"#jAddMarketTr",tBody:"#jtbMarket tbody",contextSelector:"#jAddMarketLab"}),e.bind({triggerSelector:"#jAddMerchantTr",tBody:"#jtbMerchant tbody",contextSelector:"#jAddMerchantLab"});var f=['<div class="dialog-form">            <form action="" id="frmDialog">            <div class="ui-form-item dialog-form-item">                <label for="msg" class="ui-label">                    描述                </label>                <textarea class="ui-textarea" name="msg" id="msg"></textarea>                <div class="ui-form-explain"></div>            </div>            </form>            </div>'].join(""),g=new d({title:"修改类型名称",message:f,confirmTpl:'<span class="ui-dialog-button-orange J_btnPass">修改</span>',cancelTpl:'<span class="ui-dialog-button-white J_btnRefuse">取消</span>',onCancel:function(){b({btn:".J_btnRefuse",dialog:this})}});a(".jLeaveBtn").on("click",".j-change-mes",function(){g.show();var b=a(this);g.onConfirm=function(){c({btn:".J_btnPass",dialog:this,clickbtn:b})},g.onConfirm()})})});