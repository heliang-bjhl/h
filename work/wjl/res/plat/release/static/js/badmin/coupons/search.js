seajs.use(["$","select","confirmbox","util"],function(a,b,c,d){function e(a){var b=['<div class="dialog-form">','<form action="obsolete.j" id="j_fail">','<div class="ui-form-item dialog-form-item">',"是否确定作废？","</div>",'<input type="hidden" name="tickId" value="',a,'" />',"</form>","</div>"].join("");return b}function f(a,b){d.formSend("#frmDialog",{url:($$c.domain||"http://"+location.host)+"/t/tickapply/audit.aj",extraData:{result:a,applyId:b},ajaxSuccess:function(b){b=b||{},d.alert(2==a?b.msg||"已经拒绝":b.msg||"已经通过")},error:function(){d.alert("操作超时")},bReload:!0})}new b({trigger:"#qtype"}).render(),new b({trigger:"#qrange"}).render(),new b({trigger:"#qstate"}).render();{var g=['<div class="dialog-form">        <form action="" id="frmDialog">        <div class="ui-form-item dialog-form-item">            <label for="msg" class="ui-label">                描述            </label>            <textarea class="ui-textarea" name="msg" id="msg"></textarea>            <div class="ui-form-explain"></div>        </div>        </form>        </div>'].join("");new c({trigger:".J_review",title:"标题",message:g,confirmTpl:'<span class="ui-dialog-button-orange">通过</span>',cancelTpl:'<span class="ui-dialog-button-white">拒绝</span>',onConfirm:function(){f(2,a(this.activeTrigger).data("id"),this),this.hide()},onCancel:function(){f(1,a(this.activeTrigger).data("id"),this),this.hide()}})}a(".j-cancel-btn").on("click",function(){var b=a(this).data("tickid");Util.confirm.open({title:"作废",message:e(b),confirmTpl:'<span class="ui-dialog-button-orange ui-dialog-button-orange2" id="j_bt_yes">确定</span>',cancelTpl:'<span class="ui-dialog-button-orange ui-dialog-button-orange2" id="j_bt_no">取消</span>',width:300,onConfirm:function(){sb({form:"#j_fail",submitButton:"#j_bt_yes"})},onCancel:function(){d.confirm.close()},onClose:function(){}})}),sb=function(a){d.formSend(a.form,{ajaxSuccess:function(a){d.go(a)},error:function(){d.alert("操作超时")},submitButton:a.submitButton})},$$m.finish("ok")});